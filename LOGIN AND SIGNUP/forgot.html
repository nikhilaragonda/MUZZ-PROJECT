<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forgot Password</title>
</head>
<body>
    <div class="mainLogin">
      <form id="form">
        <div class="heading">
          <h2>Forgot Password?</h2>
        </div>
        <div class="inputField">
          <label>Enter Username:</label><br />
          <input type="email" id="loginEmail" placeholder="Email" />
        </div>
        <button id="reset">Send Verification Mail</button>
        <a href="login.html" class="cancelButton">Cancel</a>
      </form>
    </div>

    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-app.js";
      import {
        getAuth,
        sendPasswordResetEmail,
      } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-auth.js";

      const firebaseConfig = {
            apiKey: "AIzaSyAHr4nBoFKqqgsA-tpvb0gY8uTWdRBQtkU",
            authDomain: "spotify-faed9.firebaseapp.com",
            projectId: "spotify-faed9",
            storageBucket: "spotify-faed9.firebasestorage.app",
            messagingSenderId: "654505870546",
            appId: "1:654505870546:web:b48ed4df80245c15add90b"
        };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);

      //forgot password

      const reset = document.getElementById("reset");
      reset.addEventListener("click", function (event) {
        event.preventDefault();

        const email = document.getElementById("loginEmail").value;
        sendPasswordResetEmail(auth, email)
          .then(() => {
            // Password reset email sent!
            // ..
            alert("email sent");
            window.location.href="./login.html"
          })
          .catch((error) => {
            const errorCode = error.code;
            const errorMessage = error.message;
            // ..
            alert(errorMessage);
          });
      });
    </script>
  </body>
</html>